@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --white: #fffff8;
  --black: #111;
  --green: #2f4f4f;
  --blue: #b4d5fe;
  --grey: #7c7c7c;
  --grvsc-border-radius: 0.25rem;
  --color-text: var(--black);
  --color-background: var(--white);
  --color-select: var(--blue);
  --color-pre-header: var(--grey);
}

html {
  @apply text-tufte-root md:text-tufte-root-md;
}


html,
body,
#___gatsby,
#gatsby-focus-wrapper {
  @apply h-full;
}

@layer base {
  @font-face {
    font-family: "et-book";
    src: url("./et-book/et-book-roman-line-figures/et-book-roman-line-figures.eot");
    src: url("./et-book/et-book-roman-line-figures/et-book-roman-line-figures.eot?#iefix") format("embedded-opentype"), url("et-book/et-book-roman-line-figures/et-book-roman-line-figures.woff") format("woff"), url("et-book/et-book-roman-line-figures/et-book-roman-line-figures.ttf") format("truetype"), url("et-book/et-book-roman-line-figures/et-book-roman-line-figures.svg#etbookromanosf") format("svg");
    font-weight: normal;
    font-style: normal;
    font-display: swap;
  }
  
  @font-face {
    font-family: "et-book";
    src: url("./et-book/et-book-display-italic-old-style-figures/et-book-display-italic-old-style-figures.eot");
    src: url("./et-book/et-book-display-italic-old-style-figures/et-book-display-italic-old-style-figures.eot?#iefix") format("embedded-opentype"), url("et-book/et-book-display-italic-old-style-figures/et-book-display-italic-old-style-figures.woff") format("woff"), url("et-book/et-book-display-italic-old-style-figures/et-book-display-italic-old-style-figures.ttf") format("truetype"), url("et-book/et-book-display-italic-old-style-figures/et-book-display-italic-old-style-figures.svg#etbookromanosf") format("svg");
    font-weight: normal;
    font-style: italic;
    font-display: swap;
  }
  
  @font-face {
    font-family: "et-book";
    src: url("./et-book/et-book-bold-line-figures/et-book-bold-line-figures.eot");
    src: url("./et-book/et-book-bold-line-figures/et-book-bold-line-figures.eot?#iefix") format("embedded-opentype"), url("et-book/et-book-bold-line-figures/et-book-bold-line-figures.woff") format("woff"), url("et-book/et-book-bold-line-figures/et-book-bold-line-figures.ttf") format("truetype"), url("et-book/et-book-bold-line-figures/et-book-bold-line-figures.svg#etbookromanosf") format("svg");
    font-weight: bold;
    font-style: normal;
    font-display: swap;
  }
  
  @font-face {
    font-family: "et-book-roman-old-style";
    src: url("./et-book/et-book-roman-old-style-figures/et-book-roman-old-style-figures.eot");
    src: url("./et-book/et-book-roman-old-style-figures/et-book-roman-old-style-figures.eot?#iefix") format("embedded-opentype"), url("et-book/et-book-roman-old-style-figures/et-book-roman-old-style-figures.woff") format("woff"), url("et-book/et-book-roman-old-style-figures/et-book-roman-old-style-figures.ttf") format("truetype"), url("et-book/et-book-roman-old-style-figures/et-book-roman-old-style-figures.svg#etbookromanosf") format("svg");
    font-weight: normal;
    font-style: normal;
    font-display: swap;
  }

  html.dark {
    --color-text: var(--white);
    --color-background: var(--green);
    --color-select: var(--blue);
    --color-pre-header: var(--white);
  }  

  h1 {
    @apply text-tufte-xxl mt-0 mb-6;
  }

  h2 {
    @apply text-tufte-xl mt-8 mb-5 italic;
  }

  h3 {
    @apply text-tufte-l mt-8 mb-5 italic;
  }

  section {
    @apply w-full md:w-tufte-section mb-20;
  }

  ul,
  ol {
    @apply list-disc pl-tufte-main md:pl-12;
  }

  code {
    @apply text-parent-xs;
  }

  a {
    @apply underline;
  }

  p {
    @apply my-5;
  }

  svg {
    @apply my-auto mx-0;
  }

  .gatsby-resp-image-wrapper, .gatsby-resp-image-wrapper * {
    @apply rounded max-w-full !important;
  }

  .gatsby-remark-code-title {
    @apply py-1.5 px-4 w-full font-mono text-xs rounded-tl rounded-tr relative inline-block;
    background-color: var(--color-pre-header);
    color: var(--color-background);
  }

  .grvsc-container {
    @apply my-4 rounded;
  }
  
  .gatsby-remark-code-title + .grvsc-container {
    @apply mt-0 rounded-tl-none rounded-tr-none;
  }

  .katex { 
    @apply text-xl w-full !important;
  }

  .katex-display > .katex > .katex-html {
    @apply w-full py-3 overflow-x-auto overflow-y-visible;
  }

  .table-wrapper {
    @apply block overflow-x-auto w-full my-4;
  }
  
  table {
    @apply border-collapse m-auto;
  }
  
  td, th {
    @apply relative border border-solid p-2 text-left;
    border-color: var(--color-text);
  }

  /* Links: replicate underline that clears descenders */
  a:link,
  a:visited {
    color: inherit;
  }

  .no-tufte-underline:link {
    background: unset;
    text-shadow: unset;
  }

  a:link, .tufte-underline, .hover-tufte-underline:hover {
    text-decoration: none;
    background: -webkit-linear-gradient(var(--color-background), var(--color-background)), -webkit-linear-gradient(var(--color-background), var(--color-background)), -webkit-linear-gradient(var(--color-text), var(--color-text));
    background: linear-gradient(var(--color-background),   var(--color-background)), linear-gradient(  var(--color-background),   var(--color-background)), linear-gradient(var(--color-text), var(--color-text));
    -webkit-background-size: 0.05em 1px, 0.05em 1px, 1px 1px;
    -moz-background-size: 0.05em 1px, 0.05em 1px, 1px 1px;
    background-size: 0.05em 1px, 0.05em 1px, 1px 1px;
    background-repeat: no-repeat, no-repeat, repeat-x;
    text-shadow: 0.03em 0   var(--color-background), -0.03em 0   var(--color-background), 0 0.03em   var(--color-background), 0 -0.03em   var(--color-background), 0.06em 0   var(--color-background), -0.06em 0   var(--color-background), 0.09em 0   var(--color-background), -0.09em 0   var(--color-background), 0.12em 0   var(--color-background), -0.12em 0   var(--color-background), 0.15em 0   var(--color-background), -0.15em 0   var(--color-background);
    background-position: 0% 93%, 100% 93%, 0% 93%;
  }

  @media screen and (-webkit-min-device-pixel-ratio: 0) {
    a:link, .tufte-underline, .hover-tufte-underline:hover {
      background-position-y: 87%, 87%, 87%;
    }
  }

  a:link::selection,
  a:link::-moz-selection {
    text-shadow: 0.03em 0   var(--color-select), -0.03em 0   var(--color-select), 0 0.03em   var(--color-select), 0 -0.03em   var(--color-select), 0.06em 0   var(--color-select), -0.06em 0   var(--color-select), 0.09em 0   var(--color-select), -0.09em 0   var(--color-select), 0.12em 0   var(--color-select), -0.12em 0   var(--color-select), 0.15em 0   var(--color-select), -0.15em 0   var(--color-select);
    background:   var(--color-select);
  }
}