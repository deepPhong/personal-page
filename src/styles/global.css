@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --white: #fffff8;
  --black: #111;
  --green: #2f4f4f;
  --blue: #b4d5fe;
  --grvsc-border-radius: 0.375rem;
  --color-text: var(--black);
  --color-background: var(--white);
  --color-select: var(--blue);
  --color-pre-header: var(--green);
}

html {
  @apply text-tufte-root md:text-tufte-root-md;
}

html,
body,
#___gatsby,
#gatsby-focus-wrapper {
  @apply h-full;
}

html.dark {
  --color-text: var(--white);
  --color-background: var(--green);
  --color-select: var(--blue);
  --color-pre-header: var(--white);
}

@layer base {
  h1 {
    @apply text-tufte-xxl mt-0 mb-6;
  }

  h2 {
    @apply text-tufte-xl mt-8 mb-5 italic;
  }

  h3 {
    @apply text-tufte-l mt-8 mb-5 italic;
  }

  section {
    @apply w-full md:w-tufte-section mb-20;
  }

  ul,
  ol {
    @apply list-disc pl-tufte-main md:pl-12;
  }

  code {
    @apply text-parent-xs;
  }

  p {
    @apply my-5;
  }

  svg {
    @apply m-0;
  }

  figure {
    @apply my-5;
  }

  /* Links: replicate underline that clears descenders */
  a:link,
  a:visited {
    color: inherit;
  }

  a:link, .tufte-underline, .hover-tufte-underline:hover {
    text-decoration: none;
    background: -webkit-linear-gradient(var(--color-background), var(--color-background)), -webkit-linear-gradient(var(--color-background), var(--color-background)), -webkit-linear-gradient(var(--color-text), var(--color-text));
    background: linear-gradient(var(--color-background),   var(--color-background)), linear-gradient(  var(--color-background),   var(--color-background)), linear-gradient(var(--color-text), var(--color-text));
    -webkit-background-size: 0.05em 1px, 0.05em 1px, 1px 1px;
    -moz-background-size: 0.05em 1px, 0.05em 1px, 1px 1px;
    background-size: 0.05em 1px, 0.05em 1px, 1px 1px;
    background-repeat: no-repeat, no-repeat, repeat-x;
    text-shadow: 0.03em 0   var(--color-background), -0.03em 0   var(--color-background), 0 0.03em   var(--color-background), 0 -0.03em   var(--color-background), 0.06em 0   var(--color-background), -0.06em 0   var(--color-background), 0.09em 0   var(--color-background), -0.09em 0   var(--color-background), 0.12em 0   var(--color-background), -0.12em 0   var(--color-background), 0.15em 0   var(--color-background), -0.15em 0   var(--color-background);
    background-position: 0% 93%, 100% 93%, 0% 93%;
  }

  @media screen and (-webkit-min-device-pixel-ratio: 0) {
    a:link, .tufte-underline, .hover-tufte-underline:hover {
      background-position-y: 87%, 87%, 87%;
    }
  }

  a:link::selection,
  a:link::-moz-selection {
    text-shadow: 0.03em 0   var(--color-select), -0.03em 0   var(--color-select), 0 0.03em   var(--color-select), 0 -0.03em   var(--color-select), 0.06em 0   var(--color-select), -0.06em 0   var(--color-select), 0.09em 0   var(--color-select), -0.09em 0   var(--color-select), 0.12em 0   var(--color-select), -0.12em 0   var(--color-select), 0.15em 0   var(--color-select), -0.15em 0   var(--color-select);
    background:   var(--color-select);
  }
}

@layer components {

  .no-tufte-underline:link {
    background: unset;
    text-shadow: unset;
  }

  [data-main-image] {
    @apply rounded-md !important;
  }
}